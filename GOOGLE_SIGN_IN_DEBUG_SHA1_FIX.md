# Google ç™»å½•å¤±è´¥ä¿®å¤æŒ‡å— - Debug SHA-1 ç¼ºå¤±é—®é¢˜

## ğŸ” é—®é¢˜è¯Šæ–­

### é”™è¯¯ç°è±¡
```
Sign-in Canceled
StatusCode: 12501
```

### æ ¹æœ¬åŸå›  â­
**å½“å‰å®‰è£…çš„æ˜¯ Debug ç‰ˆæœ¬ APKï¼Œä½† Firebase Console ä¸­åªé…ç½®äº† Play Store SHA-1ï¼Œç¼ºå°‘ Debug SHA-1ï¼**

---

## ğŸ“Š ç­¾ååˆ†æ

### å½“å‰è®¾å¤‡å®‰è£…çš„ APK ç­¾å
```
ç±»å‹ï¼šDebug ç‰ˆæœ¬
SHA-1ï¼š8A:E5:E2:C3:9E:28:4C:7C:32:77:ED:2E:89:57:BF:08:AB:4F:9E:45
SHA-256ï¼š40:27:E1:2D:39:E5:90:B3:EC:45:E2:3E:7F:16:68:60:08:32:68:5E:34:6A:2C:5A:9D:6A:C3:5C:B6:71:52:08
Keystoreï¼š~/.android/debug.keystore
```

### Firebase Console å½“å‰é…ç½®
```
âœ… Play Store SHA-1ï¼š6D:C1:09:85:E2:07:82:42:15:EC:76:10:20:0F:37:41:EB:46:40:AB
âŒ Debug SHA-1ï¼šæœªé…ç½®ï¼ˆç¼ºå¤±ï¼ï¼‰
```

### Google Play Console é…ç½®
```
âœ… SHA-1ï¼š6D:C1:09:85:E2:07:82:42:15:EC:76:10:20:0F:37:41:EB:46:40:AB
âœ… SHA-256ï¼š82:FD:AB:C6:66:68:BB:6E:43:AD:33:B7:1D:25:5D:AA:19:A7:EF:D4:B8:D6:30:88:8B:F0:...
```

---

## ğŸ”‘ ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ª SHA-1ï¼Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¼€å‘ç¯å¢ƒï¼ˆDebugï¼‰                                       â”‚
â”‚  - ä½¿ç”¨ ~/.android/debug.keystore ç­¾å                  â”‚
â”‚  - SHA-1: 8A:E5:E2:C3:9E:28:4C:7C:32:77:ED...          â”‚
â”‚  - ç”¨äºå¼€å‘å’Œæµ‹è¯•                                        â”‚
â”‚  - âœ… éœ€è¦æ·»åŠ åˆ° Firebase                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”Ÿäº§ç¯å¢ƒï¼ˆReleaseï¼‰                                     â”‚
â”‚  - ä¸Šä¼ åˆ° Google Play åç”± Google é‡æ–°ç­¾å              â”‚
â”‚  - SHA-1: 6D:C1:09:85:E2:07:82:42:15:EC...             â”‚
â”‚  - ç”¨äºçº¿ä¸Šæ­£å¼ç‰ˆæœ¬                                      â”‚
â”‚  - âœ… å·²æ·»åŠ åˆ° Firebase                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç»“è®º**ï¼šä¸¤ä¸ªç¯å¢ƒä½¿ç”¨ä¸åŒçš„ç­¾åï¼Œå› æ­¤éƒ½éœ€è¦åœ¨ Firebase ä¸­æ³¨å†Œï¼

---

## âœ… å®Œæ•´ä¿®å¤æ­¥éª¤

### æ­¥éª¤ 1ï¼šåœ¨ Firebase Console æ·»åŠ  Debug SHA-1 â­â­â­

**URL**ï¼š
```
https://console.firebase.google.com/project/quran-majeed-aa3d2/settings/general
```

**æ“ä½œ**ï¼š
1. ç™»å½• Firebase Console
2. é€‰æ‹©é¡¹ç›®ï¼š**Quran Majeed** (quran-majeed-aa3d2)
3. ç‚¹å‡»å·¦ä¾§ **è®¾ç½®å›¾æ ‡ âš™ï¸** â†’ **é¡¹ç›®è®¾ç½®**
4. å‘ä¸‹æ»šåŠ¨åˆ° **"æ‚¨çš„åº”ç”¨"**
5. æ‰¾åˆ° Android åº”ç”¨ï¼š`com.quran.quranaudio.online`
6. åœ¨ **"SHA è¯ä¹¦æŒ‡çº¹"** éƒ¨åˆ†ï¼Œç‚¹å‡» **"æ·»åŠ æŒ‡çº¹"**
7. **ç²˜è´´ä»¥ä¸‹ Debug SHA-1**ï¼ˆå®Œæ•´å¤åˆ¶ï¼‰ï¼š
   ```
   8A:E5:E2:C3:9E:28:4C:7C:32:77:ED:2E:89:57:BF:08:AB:4F:9E:45
   ```
8. ç‚¹å‡» **"ä¿å­˜"**

**é¢„æœŸç»“æœ**ï¼š
```
Firebase Console ç°åœ¨åº”æ˜¾ç¤ºä¸¤ä¸ª SHA-1ï¼š
âœ… 6D:C1:09:85:E2:07:82:42:15:EC:76:10:20:0F:37:41:EB:46:40:AB (Play Store)
âœ… 8A:E5:E2:C3:9E:28:4C:7C:32:77:ED:2E:89:57:BF:08:AB:4F:9E:45 (Debug)
```

---

### æ­¥éª¤ 2ï¼šä¸‹è½½æ–°çš„ google-services.json â­â­

**é‡è¦**ï¼šæ·»åŠ  SHA-1 åï¼Œå¿…é¡»é‡æ–°ä¸‹è½½ `google-services.json`ï¼

1. åœ¨åŒä¸€é¡µé¢ï¼ˆé¡¹ç›®è®¾ç½® â†’ å¸¸è§„ï¼‰
2. å‘ä¸‹æ»šåŠ¨åˆ° **"æ‚¨çš„åº”ç”¨"**
3. æ‰¾åˆ° `google-services.json` æ—è¾¹çš„ **ä¸‹è½½æŒ‰é’®**
4. ç‚¹å‡»ä¸‹è½½
5. ä¿å­˜åˆ° `~/Downloads/google-services.json`

**ä¸ºä»€ä¹ˆå¿…é¡»é‡æ–°ä¸‹è½½ï¼Ÿ**
```
æ—§æ–‡ä»¶ï¼š
{
  "oauth_client": [
    {
      "client_id": "...",
      "certificate_hash": "6dc10985e207824215ec7610200f3741eb4640ab"  // åªæœ‰ Play Store
    }
  ]
}

æ–°æ–‡ä»¶ï¼š
{
  "oauth_client": [
    {
      "client_id": "...",
      "certificate_hash": "6dc10985e207824215ec7610200f3741eb4640ab"  // Play Store
    },
    {
      "client_id": "...",
      "certificate_hash": "8ae5e2c39e284c7c3277ed2e8957bf08ab4f9e45"  // Debug (æ–°å¢)
    }
  ]
}
```

---

### æ­¥éª¤ 3ï¼šæ›¿æ¢é¡¹ç›®ä¸­çš„ google-services.json

**æ–¹æ³• 1ï¼šä½¿ç”¨è‡ªåŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰**

```bash
cd /Users/huwei/AndroidStudioProjects/quran0
./replace_google_services.sh
```

è„šæœ¬ä¼šï¼š
- âœ… è‡ªåŠ¨å¤‡ä»½æ—§æ–‡ä»¶ï¼ˆåŠ æ—¶é—´æˆ³ï¼‰
- âœ… å¤åˆ¶æ–°æ–‡ä»¶åˆ°é¡¹ç›®
- âœ… éªŒè¯æ–°æ–‡ä»¶åŒ…å« Debug SHA-1
- âœ… æ£€æŸ¥ OAuth å®¢æˆ·ç«¯é…ç½®

**æ–¹æ³• 2ï¼šæ‰‹åŠ¨æ›¿æ¢**

```bash
cd /Users/huwei/AndroidStudioProjects/quran0

# å¤‡ä»½æ—§æ–‡ä»¶
cp app/google-services.json app/google-services.json.backup

# æ›¿æ¢æ–°æ–‡ä»¶
cp ~/Downloads/google-services.json app/google-services.json

# éªŒè¯æ–°æ–‡ä»¶
cat app/google-services.json | grep -i "8ae5e2c3"
# åº”è¯¥èƒ½æ‰¾åˆ° Debug SHA-1
```

---

### æ­¥éª¤ 4ï¼šæ¸…ç†å¹¶é‡æ–°ç¼–è¯‘

```bash
# æ¸…ç†æ—§æ„å»º
./gradlew clean

# é‡æ–°ç¼–è¯‘å¹¶å®‰è£…åˆ°è®¾å¤‡
./gradlew installDebug --no-daemon
```

**é¢„æœŸè¾“å‡º**ï¼š
```
BUILD SUCCESSFUL in Xm Ys
Installing APK 'app-debug.apk' on 'Pixel 7' for :app:debug
Installed on 1 device.
```

---

### æ­¥éª¤ 5ï¼šæµ‹è¯• Google ç™»å½•

**æ–¹æ³• 1ï¼šä½¿ç”¨æµ‹è¯•è„šæœ¬**

```bash
./test_google_login.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. é‡å¯åº”ç”¨
2. ç­‰å¾…ä½ åœ¨è®¾å¤‡ä¸Šç‚¹å‡» Google ç™»å½•
3. åˆ†æç™»å½•æ—¥å¿—
4. æ˜¾ç¤ºæˆåŠŸæˆ–å¤±è´¥ä¿¡æ¯

**æ–¹æ³• 2ï¼šæ‰‹åŠ¨æµ‹è¯•**

1. åœ¨è®¾å¤‡ä¸Šæ‰“å¼€åº”ç”¨
2. ç‚¹å‡»ç™»å½•æŒ‰é’®
3. é€‰æ‹© Google ç™»å½•
4. é€‰æ‹©è´¦æˆ·å¹¶æˆæƒ

**é¢„æœŸç»“æœ**ï¼š
```
âœ… æˆåŠŸï¼šé¡ºåˆ©å®Œæˆ Google ç™»å½•ï¼Œè¿”å›ä¸»é¡µ
âœ… æ—¥å¿—æ˜¾ç¤ºï¼šsignInWithCredential:success
âœ… ä¸»é¡µæ˜¾ç¤ºï¼šç”¨æˆ·å¤´åƒå’Œå§“å
```

---

## ğŸ” éªŒè¯ä¿®å¤ç»“æœ

### æ£€æŸ¥ google-services.json æ˜¯å¦åŒ…å« Debug SHA-1

```bash
cd /Users/huwei/AndroidStudioProjects/quran0
cat app/google-services.json | grep -c "certificate_hash"
```

**é¢„æœŸè¾“å‡º**ï¼šè‡³å°‘ `2` (ä¸€ä¸ª Play Storeï¼Œä¸€ä¸ª Debug)

### æ£€æŸ¥ Firebase Console

è®¿é—®ï¼šhttps://console.firebase.google.com/project/quran-majeed-aa3d2/settings/general

åº”è¯¥çœ‹åˆ°ï¼š
```
SHA è¯ä¹¦æŒ‡çº¹ï¼š
âœ… 6D:C1:09:85:E2:07:82:42:15:EC:76:10:20:0F:37:41:EB:46:40:AB  SHA-1
âœ… 82:FD:AB:C6:66:68:BB:6E:43:AD:33:B7:1D:25:5D:AA:19:...      SHA-256
âœ… 8A:E5:E2:C3:9E:28:4C:7C:32:77:ED:2E:89:57:BF:08:AB:4F:9E:45  SHA-1 (æ–°æ·»åŠ )
```

### æ£€æŸ¥åº”ç”¨æ—¥å¿—

```bash
adb logcat -d | grep -E "(GoogleAuth|StatusCode)" | tail -20
```

**å¤±è´¥æ—¥å¿—ï¼ˆä¿®å¤å‰ï¼‰**ï¼š
```
âŒ GoogleAuthManager: Status Code: 12501
âŒ GoogleAuthManager: Sign-in was canceled
```

**æˆåŠŸæ—¥å¿—ï¼ˆä¿®å¤åï¼‰**ï¼š
```
âœ… GoogleAuthManager: ID Token: Present
âœ… GoogleAuthManager: signInWithCredential:success
âœ… FragMain: Google Sign-In SUCCESS!
```

---

## ğŸ¯ æ•…éšœæ’æŸ¥æ¸…å•

å¦‚æœä¿®å¤åä»ç„¶å¤±è´¥ï¼Œè¯·æ£€æŸ¥ï¼š

### 1. âœ… Firebase SHA-1 é…ç½®
- [ ] Debug SHA-1 å·²æ·»åŠ ï¼š`8A:E5:E2:C3:9E:28:4C:7C:32:77:ED:2E:89:57:BF:08:AB:4F:9E:45`
- [ ] Play Store SHA-1 å·²æ·»åŠ ï¼š`6D:C1:09:85:E2:07:82:42:15:EC:76:10:20:0F:37:41:EB:46:40:AB`
- [ ] å·²ç‚¹å‡»"ä¿å­˜"æŒ‰é’®

### 2. âœ… google-services.json æ–‡ä»¶
- [ ] å·²ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼ˆæ·»åŠ  SHA-1 ä¹‹åä¸‹è½½ï¼‰
- [ ] å·²æ›¿æ¢é¡¹ç›®ä¸­çš„æ–‡ä»¶ï¼ˆapp/google-services.jsonï¼‰
- [ ] æ–‡ä»¶åŒ…å«ä¸¤ä¸ª `certificate_hash` æ¡ç›®

### 3. âœ… åº”ç”¨ç¼–è¯‘å’Œå®‰è£…
- [ ] å·²è¿è¡Œ `./gradlew clean`
- [ ] å·²è¿è¡Œ `./gradlew installDebug`
- [ ] è®¾å¤‡ä¸Šå®‰è£…çš„æ˜¯æœ€æ–°ç‰ˆæœ¬

### 4. âœ… Firebase Authentication é…ç½®
- [ ] Firebase Console â†’ Authentication â†’ Sign-in method
- [ ] Google ç™»å½•æä¾›å•†å·²å¯ç”¨
- [ ] Support Email å·²é…ç½®

### 5. âœ… Web Client ID é…ç½®
```bash
# æ£€æŸ¥ä»£ç ä¸­çš„ Web Client ID
grep "requestIdToken" app/src/main/java/com/quran/quranaudio/online/Utils/GoogleAuthManager.java

# åº”è¯¥æ˜¾ç¤ºï¼š
# .requestIdToken("517834286063-52gsp24nqkb7sht7e7jn31397nhanumb.apps.googleusercontent.com")
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **Firebase SHA-1 é…ç½®æ–‡æ¡£**: https://developers.google.com/android/guides/client-auth
- **Google Sign-In æ•…éšœæ’æŸ¥**: https://developers.google.com/identity/sign-in/android/troubleshooting
- **é¡¹ç›®ç­¾åé—®é¢˜æ€»ç»“**: `ç­¾åé—®é¢˜å¿«é€Ÿä¿®å¤.md`

---

## ğŸš€ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# 1. è·å– Debug SHA-1
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android | grep SHA1

# 2. æ›¿æ¢ google-services.json
./replace_google_services.sh

# 3. é‡æ–°ç¼–è¯‘å¹¶å®‰è£…
./gradlew clean && ./gradlew installDebug

# 4. æµ‹è¯•ç™»å½•
./test_google_login.sh

# 5. æŸ¥çœ‹ç™»å½•æ—¥å¿—
adb logcat -d | grep -E "(GoogleAuth|StatusCode|Sign-in)"
```

---

## âœ… æ€»ç»“

### é—®é¢˜æ ¹æº
- âŒ Firebase ä¸­åªæœ‰ Play Store SHA-1
- âŒ ç¼ºå°‘ Debug SHA-1
- âŒ å¯¼è‡´ Debug ç‰ˆæœ¬æ— æ³•é€šè¿‡ Google Sign-In éªŒè¯

### è§£å†³æ–¹æ¡ˆ
1. âœ… åœ¨ Firebase Console æ·»åŠ  Debug SHA-1
2. âœ… é‡æ–°ä¸‹è½½ google-services.json
3. âœ… æ›¿æ¢é¡¹ç›®æ–‡ä»¶å¹¶é‡æ–°ç¼–è¯‘
4. âœ… æµ‹è¯• Google ç™»å½•åŠŸèƒ½

### é¢„æœŸç»“æœ
- âœ… Google ç™»å½•æˆåŠŸ
- âœ… ç”¨æˆ·ä¿¡æ¯æ­£ç¡®æ˜¾ç¤º
- âœ… æ¯æ—¥ä»»åŠ¡åŠŸèƒ½å¯ç”¨

---

**åˆ›å»ºæ—¶é—´**: 2025-10-18  
**çŠ¶æ€**: ç­‰å¾…ç”¨æˆ·åœ¨ Firebase Console æ·»åŠ  Debug SHA-1  
**ä¸‹ä¸€æ­¥**: æ·»åŠ  SHA-1 â†’ ä¸‹è½½æ–°æ–‡ä»¶ â†’ è¿è¡Œ `./replace_google_services.sh`

